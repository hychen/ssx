[ ![Codeship Status for tw-ssxelerator/ssx](https://www.codeship.io/projects/83c09b90-1740-0132-87c7-1e682cfc0f53/status)](https://www.codeship.io/projects/34046)

# Install

## Local Install

This is a Node web-app built using express, written in LiveScript, which is a meta language of JavaScript.

Install Node (>=0.8 suggested) and npm then checkout the code:

    git clone https://github.com/tw-ssxelerator/ssx

Then install the dependencies:

    cd ssx
    npm install .

Now you can run the app:

    node app.js

To view the site, open localhost:3000 in a browser. 

## Overview for Developers

- Web server :: [Express](http://expressjs.com/)
- Template Engine :: [Nunjucks](https://mozilla.github.io/nunjucks/)
- Language :: [LiveScript](http://livescript.net)

### Compile 

Since LiveScript is a meta language of JavaScript, you'll need to compile LiveScript 
codes to JavaScript by run `npm run prepublish` after you modify any LiveScript codes.

### File Structure 

- locale/ :: the translated messages in json formate that express really use.
- po/     :: po files that we will use to generate translated messages in json formate.
- vendor/ :: files of 3rd libraries.
- public/ :: assist files used in fronted end, such as javascript, css files.
- views/  :: html template files.
- app.js  :: web server JavaScript executable, generated by LiveScript.
- app.ls  :: web server LiveScript executable.

### Git Branch Explains

- master     : codes used in production server(http://www.ssxelerator.com).
- stage      : codes used in stage server(http://stage.ssxelerator.com).
- develop    : codes for next development.

## Deploy (to Heroku)

The codes will be deployed to cooresponding heroku app if the test is passed after you push to 
stage/master branch on github repository.

## Gulp / Bower 

This project uses bower to manage frontend libraries, e.x jQuery, and uses 
gulp for minification and copying of all JavaScript files.

Most of frontend javascripts from vendors should be minificated 
into `public/js/vendor.js`.

To generate `public/js/vendor.js`.

```
$ npm run gulp
```

## Embed Blog Content 

Importing RSS feed of Blog to [firebase](https://firebase.com) every 30m in a dedicate 
server by using [feedthefire_cli](https://github.com/poga/feedthefire_cli).

Fetching and display the contents from firebase by using [firereact](https://reactfiretodoapp.firebaseapp.com/).

```
$ feedthefire_cli/index.js ssx.firebaseio.com/blog ${secrets} https://ssxtalks.wordpress.com/feed/atom
```

## Translation info

This site uses `i18n-abide` with `gettext`. 

It currently supporte loclaes `en-US`, `zh-TW` locales.

To update po files after modify `views/*.html`

```
$ npm run update-po
```

To re-compile translation json files.

```
$ npm run gen-po-json
```

for more details, please read [Mozilla - Localization in Action][localization-in-action].

[localization-in-action]: https://hacks.mozilla.org/2013/04/localization-in-action-part-3-of-3-a-node-js-holiday-season-part-11/
